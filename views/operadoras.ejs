<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Operadora</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Montserrat:wght@200;300;400;700&display=swap"
        rel="stylesheet">
        <script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js" integrity="sha512-efAcjYoYT0sXxQRtxGY37CKYmqsFVOIwMApaEbrxJr4RwqVVGw8o+Lfh/+59TU07+suZn1BWq4fDl5fdgyCNkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js" integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/style-dashboard.css">
</head>

<body>
    <div class="navbardiv">
        <%- include('navbar') %>
    </div>
    <div class="alert alert-success alert-dismissible fade show fixed-top" role="alert" id="Message" style="display:none">
        Sucesso!
      </div>
      <div class="alert alert-danger alert-dismissible fade show fixed-top" role="alert" id="MessageError" style="display:none">
        Erro!
      </div>
    <div class="container mt-5 content" id="novaoperadora">
        <h2>Formulário de Cadastro de Operadora</h2>
        <form>
            <div class="row">
                <!-- Primeira coluna -->
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="razaosocial" class="form-label">Razão Social: <span>(conforme descrito na documentação oficial)</span></label>
                        <input type="text" class="form-control" id="razaosocial" name="razaosocial" required>
                    </div>
                    <div class="mb-3">
                        <label for="cnpj" class="form-label">CNPJ: <span>(apenas números)</span></label>
                        <input type="text" class="form-control" id="cnpj" name="cnpj" required>
                    </div>
                    <div class="mb-3">
                        <label for="nomefantasia" class="form-label">Nome Fantasia: <span>(nome comercial)</span></label>
                        <input type="text" class="form-control" id="nomefantasia" name="nomefantasia" required>
                    </div>
                    <div class="mb-3">
                        <label for="codans" class="form-label">Código ANS: <span>(apenas números)</span></label>
                        <input type="text" class="form-control" id="codans" name="codans" required>
                    </div>
                    <div class="mb-3">
                        <label for="endereco" class="form-label">Endereço:</label>
                        <input type="text" class="form-control" id="endereco" name="endereco" required>
                    </div>
                    <div class="mb-3">
                        <label for="numeroendereco" class="form-label">Número: <span>(apenas números)</span></label>
                        <input type="number" class="form-control" id="numeroendereco" name="numeroendereco" required>
                    </div>
                </div>
                <!-- Segunda coluna -->
                <div class="col-md-6">
                    <div class="mb-3">
                        <label for="complemento" class="form-label">Complemento: <span>(sl, ap, prédio, conjunto caso exista)</span></label>
                        <input type="text" class="form-control" id="complemento" name="complemento">
                    </div>
                    <div class="mb-3">
                        <label for="cep" class="form-label">CEP: <span>(Apenas números)</span></label>
                        <input type="text" class="form-control" id="cep" name="cep" required>
                    </div>
                    <div class="mb-3">
                        <label for="cidade" class="form-label">Cidade:</label>
                        <input type="text" class="form-control" id="cidade" name="cidade" required>
                    </div>
                    <div class="mb-3">
                        <label for="uf" class="form-label">UF:</label>
                        <select class="form-control" id="uf" name="uf" required>
                            <option value="" disable-selected>Selecione o Estado</option>
                            <option value="AC">Acre</option>
                            <option value="AL">Alagoas</option>
                            <option value="AP">Amapá</option>
                            <option value="AM">Amazonas</option>
                            <option value="BA">Bahia</option>
                            <option value="CE">Ceará</option>
                            <option value="DF">Distrito Federal</option>
                            <option value="ES">Espírito Santo</option>
                            <option value="GO">Goiás</option>
                            <option value="MA">Maranhão</option>
                            <option value="MT">Mato Grosso</option>
                            <option value="MS">Mato Grosso do Sul</option>
                            <option value="MG">Minas Gerais</option>
                            <option value="PA">Pará</option>
                            <option value="PB">Paraíba</option>
                            <option value="PR">Paraná</option>
                            <option value="PE">Pernambuco</option>
                            <option value="PI">Piauí</option>
                            <option value="RJ">Rio de Janeiro</option>
                            <option value="RN">Rio Grande do Norte</option>
                            <option value="RS">Rio Grande do Sul</option>
                            <option value="RO">Rondônia</option>
                            <option value="RR">Roraima</option>
                            <option value="SC">Santa Catarina</option>
                            <option value="SP">São Paulo</option>
                            <option value="SE">Sergipe</option>
                            <option value="TO">Tocantins</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="enredewebe" class="form-label">Website: <span>(site.com.br)</span></label>
                        <input type="text" class="form-control" id="website" name="website">
                    </div>
                    <div class="mb-3">
                        <label for="telatendimento" class="form-label">Telefone Atendimento: <span>(Se iniciar com 4004 inserir dois "00" como DDD)</span></label>
                        <input type="text" class="form-control" id="telatendimento" name="telatendimento" required>
                    </div>
                    <div class="mb-3">
                        <label for="telouvidoria" class="form-label">Telefone Ouvidoria: <span>(Se iniciar com 4004 inserir dois "00" como DDD)</span></label>
                        <input type="text" class="form-control" id="telouvidoria" name="telouvidoria" required>
                    </div>
                </div>
            </div>
            <div class="contatos">
                <h4>Contatos Operadora </h4>
                    <div class="contato" id="contato-1">
                        <div class="input-wrapper">
                            <label for="nome" class="form-label">Nome do Contato:</label>
                            <input type="text" class="form-control" name="nome_contato" required>
                        </div>
                        <div class="input-wrapper">
                            <label for="email" class="form-label">Email do Contato:</label>
                            <input type="email" class="form-control" name="email_contato" required>
                        </div>
                        <div class="input-wrapper">
                            <label for="telefone" class="form-label">Telefone do Contato:</label>
                            <input type="tel" class="form-control" name="telefone_contato" required>
                        </div>
                        <div class="input-wrapper">
                            <label for="cargo" class="form-label">Cargo do Contato:</label>
                            <input type="text" class="form-control" name="cargo_contato" required>
                        </div>
                        <div class="input-wrapper">   
                            <button type="button" class="btn btn-danger remover-contato">Remover Contato</button>
                        </div>
                    </div>
                    <button  type="button" class="btn btn-secondary adicionar-contato">Adicionar Contato</button>
            </div>
            <div class="cadastraroperadora">
                <button type="submit" class="btn btn-primary cadastrar">Cadastrar Operadora</button>
            </div>
        </form>
    </div>

    <div class="container mt-5 content">
        <h2>Operadoras Cadastradas</h2>

        <!-- Tabela de operadoras -->
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Nome Fantasia</th>
                    <th scope="col">Razão Social</th>
                    <th scope="col">Código ANS</th>
                    <th scope="col">Ações</th>
                </tr>
            </thead>
            <tbody>
                <% operadoras.forEach(function(operadora) { %>
                    <tr>
                        <td>
                            <%= operadora.nomefantasia %>
                        </td>
                        <td>
                            <%= operadora.razaosocial %>
                        </td>
                        <td>
                            <%= operadora.codans %>
                        </td>
                        <td>
                            <!-- Botão "Editar" -->
                            <button type="button" class="btn btn-primary editar-btn" data-bs-toggle="collapse"
                                data-bs-target="#editar<%= operadora.id %>" aria-expanded="false"
                                aria-controls="editar<%= operadora.id %>">
                                Editar
                            </button>
                            <button type="button" class="btn btn-secondary cancelar-btn d-none">Cancelar</button>
                        </td>
                    </tr>
                    <!-- Formulário de edição (colapsado por padrão) -->
                    <tr class="collapse editar-form-container" id="editar<%= operadora.id %>" data-id="<%= operadora.id %>">
                        <td colspan="4">
                            <h4 class="text-center">Dados da Operadora </h4>
                            <form class="editar-form" data-id="<%= operadora.id %>">
                                <table class="table table-borderless">
                                    <tr>
                                        <!-- Primeira coluna com os primeiros campos de edição -->
                                        <td>
                                            <div class="mb-3">
                                                <label for="razaosocial" class="form-label">Razão Social:</label>
                                                <input type="text" class="form-control" id="razaosocial"
                                                    name="razaosocial" value="<%= operadora.razaosocial %>"
                                                    required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="cnpj" class="form-label">CNPJ:</label>
                                                <input type="text" class="form-control" id="cnpj" name="cnpj"
                                                    value="<%= operadora.cnpj %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="nomefantasia" class="form-label">Nome Fantasia:</label>
                                                <input type="text" class="form-control" id="nomefantasia"
                                                    name="nomefantasia" value="<%= operadora.nomefantasia %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="codans" class="form-label">ANS Operadora:</label>
                                                <input type="text" class="form-control" id="codans"
                                                    name="codans" value="<%= operadora.codans %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="endereco" class="form-label">Endereço:</label>
                                                <input type="text" class="form-control" id="endereco"
                                                    name="endereco" value="<%= operadora.endereco %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="numeroendereco" class="form-label">Número:</label>
                                                <input type="number" class="form-control" id="numeroendereco"
                                                    name="numeroendereco" value="<%= operadora.numeroendereco %>" required>
                                            </div>
                                        </td>
                                        <!-- Segunda coluna com os campos restantes de edição -->
                                        <td>
                                            <div class="mb-3">
                                                <label for="complemento" class="form-label">Complemento:</label>
                                                <input type="text" class="form-control" id="complemento"
                                                    name="endereco_edit" value="<%= operadora.complemento %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="cep" class="form-label">CEP:</label>
                                                <input type="text" class="form-control" id="cep"
                                                    name="cep" value="<%= operadora.cep %>"
                                                    required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="cidade" class="form-label">Cidade:</label>
                                                <input type="text" class="form-control" id="cidade"
                                                    name="cidade" value="<%= operadora.cidade %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="uf" class="form-label">UF:</label>
                                                <input type="text" class="form-control" id="uf"
                                                    name="uf" value="<%= operadora.uf %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="website" class="form-label">Website:</label>
                                                <input type="text" class="form-control" id="website"
                                                    name="website" value="<%= operadora.website %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="telatendimento" class="form-label">Telefone Atendimento:</label>
                                                <input type="text" class="form-control" id="telatendimento"
                                                    name="telatendimento" value="<%= operadora.telatendimento %>" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="telouvidoria" class="form-label">Telefone Ouvidoria:</label>
                                                <input type="text" class="form-control" id="telouvidoria"
                                                    name="telouvidoria" value="<%= operadora.telouvidoria %>" required>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="4">
                                            <div class="contatos">
                                                <h4>Contatos Operadora </h4>
                                                <% for (let i = 0; i < contatos.length; i++) {
                                                    const contato = contatos[i];
                                                    if (contato.id_operadora === operadora.id) { %>
                                                    <div class="contato" id="contato-1" data-id="<% contato.id %>">
                                                        <div class="input-wrapper">
                                                            <label for="nome" class="form-label">Nome do Contato:</label>
                                                            <input type="text" class="form-control" name="nome_contato"  value="<%= contato.nome %>" required>
                                                        </div>
                                                        <div class="input-wrapper">
                                                            <label for="email" class="form-label">Email do Contato:</label>
                                                            <input type="email" class="form-control" name="email_contato" 
                                                            value="<%= contato.email %>" required>
                                                        </div>
                                                        <div class="input-wrapper">
                                                            <label for="telefone" class="form-label">Telefone do Contato:</label>
                                                            <input type="tel" class="form-control" name="telefone_contato" value="<%= contato.telefone %>" required>
                                                        </div>
                                                        <div class="input-wrapper">
                                                            <label for="cargo" class="form-label">Cargo do Contato:</label>
                                                            <input type="text" class="form-control" name="cargo_contato" value="<%= contato.cargo %>" required>
                                                        </div>
                                                        <div class="input-wrapper">   
                                                            <button type="button" class="btn btn-danger remover-contato excluir">Remover Contato</button>
                                                        </div>
                                                    </div>
                                                <% }} %>
                                                    <button  type="button" class="btn btn-secondary adicionar-contato">Adicionar Contato</button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2">
                                            <!-- Botões "Salvar" e "Cancelar" -->
                                            <button type="submit" class="btn btn-success salvar-btn">Salvar Operadora</button>
                                            <button type="button" class="btn btn-danger excluir-btn"
                                                data-id="<%= operadora.id %>">Excluir Operadora</button>
                                        </td>
                                    </tr>
                                </table>
                        </td>
                        </form>
                    </tr>

                    <% }); %>
            </tbody>
        </table>

    </div>
    <script src="/js/jsOperadora.js"></script>
    <script src="/js/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>

</html>