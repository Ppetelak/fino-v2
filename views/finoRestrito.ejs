<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fino <%= fino.id %></title>

    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=Montserrat:wght@200;300;400;700&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.0.js"
        integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/style-restrito.css">
</head>
<body>
    <main>
        <div class="content imprimir">
            <div class="row cabecalho">
                <h2>Formulário de Implantação de novas Operadoras - Linha Master </h2>
                <div class="col">
                    <label>Fino de numero:</label>
                    <p><%= fino.id %></p>
                </div>
                <div class="col">
                    <label>Operadora: </label>
                    <p><%= operadora.nomefantasia %></p>
                </div>
                <div class="col">
                    <label>Administradora: </label>
                    <p><%= fino.administradora %></p>
                </div>
                <div class="col">
                    <label>Modalidade: </label>
                    <p><%= fino.modalidade %></p>
                </div>
                <div class="col">
                    <label>Data Criação: </label>
                    <p>
                    <script>
                        const optionsDC = { year: 'numeric', month: '2-digit', day: '2-digit' };
                        const dataAtualizacaoDC = new Date('<%= fino.datacriacao %>').toLocaleDateString('pt-BR', optionsDC);
                        document.write(dataAtualizacaoDC);
                    </script>
                    </p>
                </div>
            </div>
            <div class="row dadosOperadora" id="dadosOperadora">
                <h3> Dados da Operadora</h3>
                <div class="tm-50">
                    <p><strong>Razão Social: </strong> <span> <%= operadora.razaosocial %> </span> <button class="copy-button"><i class="bi bi-back"></i></button></p>
                    <p><strong> CNPJ: </strong> <span> <%= operadora.cnpj %> </span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>ANS Operadora: </strong> <span> <%= operadora.codans %> </span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>Website:</strong> <span> <%= operadora.website %> </span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>Endereço:</strong><span> <%= operadora.endereco %> </span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>Cidade: </strong> <span> <%= operadora.cidade %> </span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                </div>
                <div class="tm-50">
                    <p><strong>Complemento: </strong> <span> <%= operadora.complemento %></span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>Número:</strong> <span> <%= operadora.numeroendereco %></span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>Cep: </strong> <span> <%= operadora.cep %></span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>UF: </strong> <span> <%= operadora.uf %></span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>Telefone Atendimento:</strong><span>  <%= operadora.telatendimento %></span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                    <p><strong>Telefone Ouvidoria:</strong> <span> <%= operadora.telouvidoria %></span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                </div>
            </div>
            <div class="row produtos" id="produtos">
                <h3> Tabela de Valores </h3>
                <div class="produtos-container">
                    <% produtos.forEach(function (produto) { %>
                    <div class="produto" data-id="<%= produto.id %>">
                        <div class="tabelaValores">
                            <h4><%= produto.nomedoplano %></h4>
                            <table>
                                <thead>
                                    <th></th>
                                    <th></th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Operadora</td>
                                        <td> <%= operadora.nomefantasia %></td>
                                    </tr>
                                    <tr>
                                        <td> Nome </td>
                                        <td> <%= produto.nomedoplano %></td>
                                    </tr>
                                    <tr>
                                        <td> ANS </td>
                                        <td> <%= produto.ans %> </td>
                                    </tr>
                                    <tr>
                                        <td> Acomodação </td>
                                        <td> <%= produto.acomodacao %></td>
                                    </tr>
                                    <tr>
                                        <td> Fator Moderador </td>
                                        <td> <%= produto.cooparticipacao %></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table">
                                <thead>
                                    <th>Faixa Etária</th>
                                    <th>Valor NET </th>
                                    <th>Valor Venda</th>
                                    <th>Variação (%)</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        
                                        
                                        <td>0 a 18 anos</td>
                                        <td> R$ <%= produto.fx1 %> </td>
                                        <td>R$ <%= produto.fx1comercial %></td>
                                        <td>0.00</td>
                                    </tr>
                                    <tr>
                                        <td>19 a 23 anos</td>
                                        <td> R$ <%= produto.fx2 %> </td>
                                        <td>R$ <%= produto.fx2comercial %></td>
                                        <td> <%= produto.variacao1 %></td>
                                    </tr>
                                    <tr>
                                        <td>24 a 28 anos</td>
                                        <td> R$ <%= produto.fx3 %> </td>
                                        <td>R$ <%= produto.fx3comercial %></td>
                                        <td> <%= produto.variacao2 %></td>
                                    </tr>
                                    <tr>
                                        <td>29 a 33 anos</td>
                                        <td> R$ <%= produto.fx4 %> </td>
                                        <td>R$ <%= produto.fx4comercial %></td>
                                        <td> <%= produto.variacao3 %></td>
                                    </tr>
                                    <tr>
                                        <td>34 a 38 anos</td>
                                        <td> R$ <%= produto.fx5 %> </td>
                                        <td>R$ <%= produto.fx5comercial %></td>
                                        <td> <%= produto.variacao4 %></td>
                                    </tr>
                                    <tr>
                                        <td>39 a 43 anos</td>
                                        <td> R$ <%= produto.fx6 %> </td>
                                        <td>R$ <%= produto.fx6comercial %></td>
                                        <td> <%= produto.variacao5 %></td>
                                    </tr>
                                    <tr>
                                        <td>44 a 48 anos</td>
                                        <td> R$ <%= produto.fx7 %> </td>
                                        <td>R$ <%= produto.fx7comercial %></td>
                                        <td> <%= produto.variacao6 %></td>
                                    </tr>
                                    <tr>
                                        <td>49 a 53 anos</td>
                                        <td> R$ <%= produto.fx8 %> </td>
                                        <td>R$ <%= produto.fx8comercial %></td>
                                        <td> <%= produto.variacao7 %></td>
                                    </tr>
                                    <tr>
                                        <td>54 a 58 anos</td>
                                        <td> R$ <%= produto.fx9 %> </td>
                                        <td>R$ <%= produto.fx9comercial %></td>
                                        <td> <%= produto.variacao8 %></td>
                                    </tr>
                                    <tr>
                                        <td>59+</td>
                                        <td> R$ <%= produto.fx10 %> </td>
                                        <td>R$ <%= produto.fx10comercial %></td>
                                        <td> <%= produto.variacao9 %></td>
                                    </tr>
                                </tbody>
                            </table>
                            
    
                        </div>                 
                    </div>             
                    <% })%>
                </div>
            </div>
            <div class="row mt-5">
                <div class="col-4">
                    <a href="/gerar-excel/<%= operadora.id %>/<%= encodeURIComponent(operadora.nomefantasia) %>/<%= encodeURIComponent(fino.administradora) %>" download="arquivo_excel.xlsx">
                        <button class="btn btn-primary" type="button">
                            <i class="bi bi-file-earmark-spreadsheet"></i> GERAR EXCEL DIGITAL SAÚDE 
                        </button>
                    </a>
                </div>
                <div class="col-4">
                    <a href="/gerar-excel-interno/<%= operadora.id %>/<%= encodeURIComponent(operadora.nomefantasia) %>/<%= encodeURIComponent(fino.administradora) %>" download="arquivo_excel.xlsx">
                        <button class="btn btn-primary" type="button"><i class="bi bi-file-earmark-spreadsheet"></i> GERAR EXCEL ADMINISTRADORA </button>
                      </a>
                </div>
                <div class="col-4"> 
                    <button class="btn btn-primary" type="button" id="copiarLink"> 
                        <i class="bi bi-share-fill"></i>
                        COPIAR LINK
                    </button>
                </div>
            </div>
            <div class="row procedimentosLista" id="procedimentosLista">
                <h3>Procedimentos</h3>
                <div class="row">
                    <% if (procedimentos.length > 0) { %>
                        <% procedimentos.forEach(function(procedimento) { %>
                            <div class="row procedimento mt-3 mb-3">
                                <div class="tm-50">
                                    <strong>Descrição</strong>
                                    <p> <span><%= procedimento.descricao %></span> <button class="copy-button"><i class="bi bi-back"></i></i></button></p>
                                </div>
                                <div class="tm-50">
                                    <strong>Cooparticipação </strong>
                                    <table class="table">
                                        <thead>
                                            <th>Valor</th>
                                            <th>Limite</th>
                                            <th>Franquia</th>
                                            <th>Carência (dias)</th>
                                        </thead>
                                        <tr>
                                            <td>R$ <%= procedimento.valorcop %></td>
                                            <td>R$ <%= procedimento.limitecop %></td>
                                            <td><%= procedimento.franquiacop %></td>
                                            <td><%= procedimento.limitecarenciadias %></td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        <% }); %>
                    <% } else { %>
                        <p>Sem procedimentos vinculados ao produto</p>
                    <% } %>
                </div>
            </div>
            <div class="row entidades" id="entidades"> 
                <h3> Entidades Aprovadas </h3>
                <table class="table">
                    <% if(entidades.length > 0) { %>
                    <thead>
                        <th> Nome </th>
                        <th> Descrição </th>
                        <th> Público </th>
                        <th> Documentos </th>
                        <th> Taxa </th>
                    </thead>
                    <tbody>
                        
                            <% entidades.forEach(function(entidade){ %>
                        <tr>
                            <td>
                                <%= entidade.nome %>
                            </td>
                            <td>
                                <%= entidade.descricao %>
                            </td>
                            <td>
                                <%= entidade.publico %>
                            </td>
                            <td>
                                <%= entidade.documentos %>
                            </td>
                            <td>
                                <%= entidade.taxa %>
                            </td>
                        </tr>
                        <% }) %>
                        <% } else { %>
                            <p> Sem entidades aprovadas </p>
                        <% } %>
                    </tbody>
                </table>
            </div>
            <div class="row vigencias" id="vigencias">
                <h3> Vigências </h3>
                <div class="row">
                    <p><strong>Aniversário de Contrato: </strong> 
                        <span>
                            <script>
                                const optionsAC = { year: 'numeric', month: '2-digit', day: '2-digit' };
                                const dataAniversarioContrato = new Date('<%= fino.aniversariocontrato %>').toLocaleDateString('pt-BR', optionsAC);
                                document.write(dataAniversarioContrato);
                            </script>
                        </span> 
                        <button class="copy-button"><i class="bi bi-back"></i></button>
                    </p>
                </div>
                <div class="row">
                    <table class="table">
                        <thead>
                            <th> Início </th>
                            <th> Movimentação </th>
                            <th> Faturamento </th>
                        </thead>
                        <tbody>
                            <% vigencias.forEach(function (vigencia){ %> 
                                <tr>
                                    <td> <%= vigencia.iniciodavigencia %> </td>
                                    <td> <%= vigencia.movimentacao %> </td>
                                    <td> <%= vigencia.datafaturamento %> </td>
                                </tr>
                           <% }); %>
                        </tbody>
                    </table>
                </div>

            </div>
            <div class="row observacoes">
                <h3> Observações gerais </h3>
                <div class="row">
                    <div class="tm-100">
                        <strong> Observações gerais sobre a implantação, informações de contrato, marketing, negociações etc ..</strong>
                        <p> <%= fino.obsFino %> </p>
                    </div>
                </div>
            </div>
        </div>
        
    </main>
    <script src="/js/jsVisualizacaoRestrita.js" defer type="module"></script>

        
</body>
</html>